# GoFindMe UrFU
Telegram-бот для студентов ИРИТ-РТФ, который помогает находить ментора, напарника или помощника для реализации проекта.



## Почему это полезно

### Для студентов
- **Быстрый поиск ментора** по интересам: бот автоматически уведомит найденного ментора и отправит вам ссылку на контакт.

- **Планируемое развитие**: интеграция с инфраструктурой кампуса — аренда коворкингов, отслеживание их загруженности, объединение команд студентов и менторов.

### Для менторов
- **Централизованные заявки**: все запросы студентов собираются в одном месте — не нужно просматривать множество чатов и личных сообщений.

- Возможность выбрать интересный проект и связаться со студентом для совместной работы.

- В будущем — один клик для получения статуса подопечных и информации о том, в каком коворкинге они находятся.



## Технологический стек
- Язык программирования: Python 3.12
- Менеджер пакетов: Poetry
- Telegram: Aiogram
- База данных: PostgreSQL, Redis
- Работа с БД: Asyncpg, SQLAlchemy (декларативный стиль)
- Локализация: Babel
- Развертка на сервер: Docker, Docker Compose



## Технические преимущества
- Весь код написан в асинхронном стиле: Aiogram для Telegram API, асинхронный клиент Redis и PostgreSQL.

- Используются все возможности Aiogram: FSM для процесса регистрации, Middlewares для доступа к базе данных и защиты от попыток сломать бота, а также фильтры хендлеров и callback'и.

- База данных создается с применением SQLAlchemy и его декларативного подхода, что обеспечивает дополнительный слой абстракции над БД, улучшает читаемость кода.

- Развертка на сервер через Docker Compose позволяет не засорять сервер дополнительными библиотеками и их зависимостями, а также обеспечивает полную воспроизводимость на любом железе.

- Локализация через Babel позволяет использовать бота всем студентам ИРИТ-РТФ, вне зависимости от их родного языка. Вовлеченные иностранные студенты могут сами предлагать переводы, укрепляя и расширяя сообщество пользователей бота.


## Развертывание на сервере

### Подготовка окружения (один раз)
1. Установите Docker, Docker Compose и Git.  
  Пример для Ubuntu:
   ```
   sudo apt update && sudo apt install -y docker.io docker-compose-v2 git
   ```
2. Добавьте пользователя в группу docker:
   ```
   sudo usermod -aG docker $USER
   ```
3. Перезайдите в систему, чтобы изменения вступили в силу.

### Запуск и обновление
При обновлении проекта (git pull):
- Остановите работу контейнера командой `docker compose down`.

Рекомендуемый порядок команд для сборки и запуска:

1. Скомпилируйте локализации:
   ```
   ./scripts/compile_locales.sh
   ```

2. Заполните `example.env` и переименуйте его в `.env`

3. Запустите PostgreSQL:
   ```
   docker compose up postgres -d
   ```

4. Создание контейнера бота из образа:
   ```
   ./scripts/build.sh
   ```

5. Заходим в контейнер бота:
   ```
   docker run -it --rm --network urfu_teamfinder_default urfu_teamfinder-scripts:1.0.0
   poetry run python -m scripts.create_app_tables
   exit
   ```

6. Запускаем контейнер с ботом полностью:
   ```
   docker compose up -d
   ```

(Если у вас другой рабочий процесс — замените шаги на конкретные команды docker-compose или docker cli)



## Планы на будущее
- [ ] Теги в профиле.

- [ ] Листание истории анкет назад.

- [ ] Счетчик проектов в профиле.

- [ ] Комментарии к заявке ментору.

- [ ] Процент выполненных проектов в профиле.

- [ ] Локализация бота для иностранных студентов.

- [ ] Модерация и блокировка нарушителей.

- [ ] Возможность оплаты услуг ментора / денежное поощрение.

- [ ] Набор групп студентов для совместной работы или поиска ментора.

- [ ] Формирование групп студентов для совместной работы.

- [ ] Возможность для групп арендовать коворкинги. 

- [ ] Аналитика занятых мест в коворкингах, напоминание об освобождении мест.
